<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Hub - Windows 2000 Edition</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <a class="skip-link" href="#main-lobby">Skip to lobby content</a>

    <!-- Top Navigation Bar -->
    <nav class="top-navbar">
        <div class="navbar-content">
            <div class="navbar-left">
                <span class="navbar-title">üéÆ Game Hub</span>
            </div>
            <div class="navbar-right">
                <button id="stats-button" class="navbar-btn" type="button" title="View Stats">
                    <span id="navbar-username">Guest</span> | Wins: <span id="navbar-wins">0</span>
                </button>
                <button id="network-toggle" class="navbar-btn" type="button" title="Toggle Network Info">
                    ‚ÑπÔ∏è
                </button>
            </div>
        </div>
    </nav>

    <div class="app-container">
        <div class="centered-content">
            <header class="header">
                <div class="window">
                    <div class="title-bar">
                        <span class="title-bar-text">üéÆ Game Hub - Windows 2000 Edition</span>
                        <div class="title-bar-controls">
                            <button type="button" class="title-bar-btn" aria-label="Minimize" tabindex="-1">_</button>
                            <button type="button" class="title-bar-btn" aria-label="Maximize" tabindex="-1">‚ñ°</button>
                            <button type="button" class="title-bar-btn" aria-label="Close" tabindex="-1">√ó</button>
                        </div>
                    </div>
                    <div class="window-body header-body">
                        <h1 class="intro-text">Welcome to Game Hub</h1>
                        <p class="tagline">Play classic multiplayer games with friends - locally or online!</p>
                    </div>
                </div>
            </header>

            <main class="main-content">
            <section id="main-lobby" class="window" aria-labelledby="main-lobby-title">
                <div class="title-bar">
                    <span class="title-bar-text" id="main-lobby-title">‚öôÔ∏è Setup & Play</span>
                </div>
                <div class="window-body">
                    <!-- Username Section -->
                    <div class="lobby-section" id="username-section" data-tutorial="username">
                        <div class="section-header">
                            <h2 id="username-title">üë§ Player Name</h2>
                        </div>
                        <p id="name-greeting" class="name-greeting">Playing as: <span id="player-name-preview">Guest</span></p>
                        <label for="username-input" class="sr-only">Username</label>
                        <div class="input-row">
                            <input type="text" id="username-input" placeholder="Enter your name..." class="input-field" maxlength="24" autocomplete="name">
                            <button id="save-username-btn" class="btn btn-primary" type="button">Save</button>
                        </div>
                    </div>

                    <!-- Quick Play Actions -->
                    <div class="lobby-section" id="quick-play-section" data-tutorial="quickplay">
                        <div class="section-header">
                            <h2>üéÆ Quick Play</h2>
                        </div>
                        <div class="quick-actions">
                            <button id="show-create-game-modal-btn" class="quick-action-btn btn-primary" type="button" data-tutorial="create">
                                <span class="btn-icon">‚ûï</span>
                                <span class="btn-text">
                                    <strong>Create Game</strong>
                                    <small>Host a new game</small>
                                </span>
                            </button>
                            <button id="show-available-games-btn" class="quick-action-btn btn-secondary" type="button" data-tutorial="join">
                                <span class="btn-icon">üîç</span>
                                <span class="btn-text">
                                    <strong>Join Game</strong>
                                    <small>Browse available games</small>
                                </span>
                            </button>
                        </div>
                    </div>

                    <!-- Online Play Section -->
                    <div class="lobby-section" id="online-section" data-tutorial="online">
                        <div class="section-header">
                            <h2 id="p2p-title">üåê Play Online</h2>
                        </div>
                        <p class="section-description">Connect with friends anywhere using a shared room code</p>
                        <label for="online-room-code" class="sr-only">Room code</label>
                        <div class="input-row">
                            <input type="text" id="online-room-code" placeholder="Enter room code..." class="input-field" autocomplete="off">
                            <button id="join-online-btn" class="btn btn-primary" type="button">Join Room</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="match-lobby" class="window hidden" aria-labelledby="match-lobby-title">
                <div class="title-bar">
                    <span class="title-bar-text" id="match-lobby-title">Match Lobby</span>
                </div>
                <div class="window-body">
                    <h1 id="match-lobby-gametype" class="window-heading">Game Lobby</h1>
                    <p>The game will begin when the host starts the match.</p>

                    <div class="match-lobby classic-sunken" role="list">
                        <div class="player-card classic-raised" id="player1-card" role="listitem">
                            <p class="player-name">Player 1 (Host)</p>
                            <p id="player1-status" class="status not-ready">Not Ready</p>
                        </div>
                        <div class="player-card classic-raised" id="player2-card" role="listitem">
                            <p class="player-name">Waiting for Player...</p>
                            <p id="player2-status" class="status not-ready">Not Ready</p>
                        </div>
                    </div>
                    <div class="match-controls">
                        <button id="ready-btn" class="btn btn-warning" type="button">Ready Up</button>
                        <button id="start-game-btn" class="btn btn-primary hidden" type="button" disabled>Start Game</button>
                        <button id="leave-room-btn" class="btn btn-secondary" type="button">Leave Room</button>
                    </div>
                </div>
            </section>

            <section id="game-ui" class="window hidden" aria-labelledby="game-session-title">
                <div class="title-bar">
                    <span class="title-bar-text" id="game-session-title">Game Session</span>
                </div>
                <div class="window-body">
                    <div id="game-info-bar" class="classic-raised" role="status">
                        <div>
                            <p>Mode: <b id="game-mode"></b></p>
                            <p>Your Color: <b id="player-color"></b></p>
                        </div>
                        <h2 id="turn-indicator" aria-live="assertive"></h2>
                    </div>
                    <div id="scoreboard" class="scoreboard classic-raised hidden" aria-live="assertive">
                        <p id="score-text">Red: 0 ‚Äì Black: 0</p>
                    </div>
                    <div class="game-stage" data-component="game-board">
                        <div id="game-container" class="classic-sunken" role="application" aria-label="Game board"></div>
                        <p class="game-stage__meta">The board adapts automatically to your screen size.</p>
                    </div>
                    <div class="match-controls" aria-label="Game actions">
                        <button id="pause-game-btn" class="btn btn-secondary" type="button">Pause (ESC)</button>
                        <button id="exit-to-menu-btn" class="btn" type="button">Exit to Menu</button>
                    </div>
                    <div id="pause-menu" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="pause-menu-title" tabindex="-1">
                        <div class="modal-content classic-raised">
                            <div class="title-bar">
                                <span class="title-bar-text" id="pause-menu-title">Game Paused</span>
                            </div>
                            <div class="modal-body">
                                <p>The game is paused. Other players can still see the board.</p>
                                <div class="modal-actions">
                                    <button id="resume-game-btn" class="btn btn-primary" type="button">Resume (ESC)</button>
                                    <button id="pause-exit-to-menu-btn" class="btn btn-warning" type="button">Exit to Lobby</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="game-over-message" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="winner-text" tabindex="-1">
                        <div class="modal-content classic-raised">
                            <h1 id="winner-text"></h1>
                            <button id="game-over-exit-btn" class="btn btn-primary" type="button">Back to Lobby</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

            <footer class="footer" id="network-footer" role="contentinfo">
            <div class="window">
                <div class="title-bar">
                    <span class="title-bar-text">Server Status</span>
                    <button id="footer-collapse-btn" class="title-bar-btn" aria-label="Toggle server info">‚ñº</button>
                </div>
                <div class="window-body status-body" id="network-footer-body">
                    <div class="status-indicator online" role="status">Online</div>
                    <div class="status-message" aria-live="polite" role="status">Local multiplayer services are running.</div>
                    <div class="network-info" aria-live="polite" role="status">
                        IP: <span id="server-ip">Loading‚Ä¶</span> ‚Ä¢ URL: <span id="server-url">Loading‚Ä¶</span>
                    </div>
                </div>
            </div>
        </footer>
        </div>
    </div>

    <!-- Tutorial Overlay -->
    <div id="tutorial-overlay" class="tutorial-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="tutorial-title">
        <div class="tutorial-content window">
            <div class="title-bar">
                <span class="title-bar-text" id="tutorial-title">üìö Welcome Tutorial</span>
            </div>
            <div class="window-body">
                <div class="tutorial-step" data-step="0">
                    <h2>Welcome to Game Hub! üéÆ</h2>
                    <p>This quick tutorial will help you get started. Let's show you around!</p>
                    <div class="tutorial-image">
                        <div class="tutorial-icon">üéØ</div>
                    </div>
                </div>
                <div class="tutorial-step hidden" data-step="1">
                    <h2>Set Your Username üë§</h2>
                    <p>First, give yourself a name! This will be shown to other players and your stats will be saved locally.</p>
                    <div class="tutorial-pointer">üëÜ Find the "Player Name" section above</div>
                </div>
                <div class="tutorial-step hidden" data-step="2">
                    <h2>Create or Join Games üéÆ</h2>
                    <p>Use the Quick Play buttons to start:</p>
                    <ul>
                        <li><strong>Create Game:</strong> Host a new game and wait for players to join</li>
                        <li><strong>Join Game:</strong> Browse and join games on your local network</li>
                    </ul>
                </div>
                <div class="tutorial-step hidden" data-step="3">
                    <h2>Play Online üåê</h2>
                    <p>Want to play with friends anywhere? Use the Online Play section with a shared room code!</p>
                    <div class="tutorial-pointer">üëá Enter the same code as your friend</div>
                </div>
                <div class="tutorial-step hidden" data-step="4">
                    <h2>Ready to Play! ‚ú®</h2>
                    <p>You're all set! Check your stats anytime by clicking the navbar at the top.</p>
                    <p><strong>Tip:</strong> The server info at the bottom shows your connection status.</p>
                </div>
                <div class="tutorial-navigation">
                    <button id="tutorial-skip" class="btn btn-secondary" type="button">Skip Tutorial</button>
                    <div class="tutorial-progress">
                        <span id="tutorial-step-indicator">1 / 5</span>
                    </div>
                    <button id="tutorial-next" class="btn btn-primary" type="button">Next</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Overlay -->
    <div id="stats-overlay" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="stats-title" tabindex="-1">
        <div class="modal-content classic-raised">
            <div class="title-bar">
                <span class="title-bar-text" id="stats-title">Player Statistics</span>
                <div class="title-bar-controls">
                    <button type="button" class="title-bar-btn" id="close-stats-btn" aria-label="Close statistics">√ó</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="stats-content">
                    <h2 id="stats-username-display">Guest</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-label">Total Wins</div>
                            <div class="stat-value" id="stats-wins">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Total Losses</div>
                            <div class="stat-value" id="stats-losses">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Games Played</div>
                            <div class="stat-value" id="stats-games">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Win Rate</div>
                            <div class="stat-value" id="stats-winrate">0%</div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="close-stats-modal-btn" class="btn btn-primary" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Game Modal -->
    <div id="create-game-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="create-game-title" tabindex="-1">
        <div class="modal-content classic-raised">
            <div class="title-bar">
                <span class="title-bar-text" id="create-game-title">Create a New Game</span>
            </div>
            <div class="modal-body">
                <p>Choose a game to host on the local network.</p>
                <div id="game-selection-list" class="selection-list"></div>
                <div class="modal-actions">
                    <button id="close-modal-btn" class="btn" type="button">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Available Games Modal -->
    <div id="available-games-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="available-games-title" tabindex="-1">
        <div class="modal-content classic-raised" style="max-width: 600px;">
            <div class="title-bar">
                <span class="title-bar-text" id="available-games-title">Available LAN Games</span>
                <div class="title-bar-controls">
                    <button type="button" class="title-bar-btn" id="close-available-games-btn" aria-label="Close available games">√ó</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="lobby-scroll" style="max-height: 400px; overflow-y: auto;">
                    <div id="modal-room-list">
                        <p class="text-muted">No open games found. Create one!</p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="close-available-games-modal-btn" class="btn" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="global-loading" class="win2k-loading hidden" role="status" aria-live="polite">
        <span class="win2k-loading__bar" aria-hidden="true"></span>
        <span>Loading game assets‚Ä¶</span>
    </div>

    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="false"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="/js/main.js"></script>
</body>
</html>
